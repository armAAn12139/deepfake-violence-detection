<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Deepfake Violence Detection</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
        }

        .results img {
            max-width: 150px;
            margin: 10px;
        }

        .results {
            display: flex;
            flex-wrap: wrap;
        }
    </style>
</head>

<body>
    <h1>Deepfake Violence Detection</h1>

    <form id="uploadForm" enctype="multipart/form-data">
        <input type="file" name="file" required />
        <button type="submit">Analyze</button>
    </form>

    <h2>Results:</h2>
    <div id="results"></div>

    <script>
        const form = document.getElementById('uploadForm');
        const resultsDiv = document.getElementById('results');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            resultsDiv.innerHTML = 'Processing... Please wait.';

            const formData = new FormData(form);

            const response = await fetch('/analyze', {
                method: 'POST',
                body: formData
            });

            const data = await response.json();
            resultsDiv.innerHTML = '';

            data.suspect_faces.forEach((facePath, idx) => {
                const container = document.createElement('div');
                container.innerHTML = `
                    <img src="${facePath}" alt="Face">
                    <p><strong>Deepfake:</strong> ${data.deepfake[idx].label} (${data.deepfake[idx].confidence.toFixed(2)})</p>
                    <p><strong>Violence:</strong> ${data.violence[idx].label} (${data.violence[idx].confidence.toFixed(2)})</p>
                    <p><strong>Emotion:</strong> ${data.emotion[idx].label} (${data.emotion[idx].confidence.toFixed(2)})</p>
                    <hr>
                `;
                resultsDiv.appendChild(container);
            });
        });
    </script>
</body>

</html>
